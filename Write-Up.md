# Live Machine

## Penetration Testing Methodology

**Reconnaissance**
* nmap

**Enumeration**
* Read source code to get another directory

**Exploitation**
* SQL Injection - Login Page
* Command Injection

**Privilege Escalation**
* sudo python

**Capturing the flag**
* /root/root.txt
_______________________________________________________________________________________________________

## Walkthrough

```
nmap <ip>
```

![image](https://user-images.githubusercontent.com/44063862/85248289-fbb65480-b482-11ea-9898-4825ff7662d9.png)

```
nmap -A -T4 -p- -Pn â€“min-rate 2500 -vv <ip>
```

![image](https://user-images.githubusercontent.com/44063862/85248431-59e33780-b483-11ea-9131-683794b53c47.png)

From the nmap scanning. I found that 2 port open. Which is
* 22 (ssh)
* 80 (http)

I browse the given IP address. 

![image](https://user-images.githubusercontent.com/44063862/85248487-8303c800-b483-11ea-9619-70c10eda66d6.png)

I found directory (I will call this directory "a") in the source code.

![image](https://user-images.githubusercontent.com/44063862/85248548-b3e3fd00-b483-11ea-91c2-3f1dcb2278df.png)

Open it. http://<ip>/a

![image](https://user-images.githubusercontent.com/44063862/85249817-594ca000-b487-11ea-8bb8-e8a4eae69921.png)

There is a login page. It is good to try SQL Injection. [REFER](https://medium.com/@ismailtasdelen/sql-injection-payload-list-b97656cfd66b)

Username = admin' or '1'='1, Password = admin

![image](https://user-images.githubusercontent.com/44063862/85250003-dd9f2300-b487-11ea-9fab-3c1287cbf786.png)

POOF! We are login! http://ip/a/.php

![image](https://user-images.githubusercontent.com/44063862/85250212-83529200-b488-11ea-9644-8b77b0c2b3be.png)

We can try Command Injection here. 

I try ls -al and cat. It give me 2 username and password. I try login with those credentials. BUt it failed. Then, I remmember I have port 22, SSH. 

![image](https://user-images.githubusercontent.com/44063862/85250920-82226480-b48a-11ea-83b5-f32827930f20.png)

Command: sudo -l

![image](https://user-images.githubusercontent.com/44063862/85251521-18a35580-b48c-11ea-872f-c1f79022f9d2.png)

[REFER](https://gtfobins.github.io/#python)

![image](https://user-images.githubusercontent.com/44063862/85251656-733cb180-b48c-11ea-9938-13869c6e3bcc.png)

![image](https://user-images.githubusercontent.com/44063862/85251658-7768cf00-b48c-11ea-80da-9c698b5e823a.png)

Command: sudo python -c 'import os; os.system("/bin/sh")'

![image](https://user-images.githubusercontent.com/44063862/85251698-949d9d80-b48c-11ea-96d8-3f28d53f5540.png)

![image](https://user-images.githubusercontent.com/44063862/85251786-c7479600-b48c-11ea-80af-dd571d3338d9.png)

**By _AdaniKamal_**
